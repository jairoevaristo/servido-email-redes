<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.socket.io/4.4.1/socket.io.min.js" integrity="sha384-fKnu0iswBIqkjxrhQCTZ7qlLHOFEgNkRmK2vaO/LbTZSXdJfAu6ewRBdwHPhBo/H" crossorigin="anonymous"></script>
  <title>Ink Email</title>
</head>
<body>
  <h1 class="caixa-entrada">Caixa de Entrada</h1>
  <div class="containerMail">
    <h2 class="empty">Sem e-mail na caixa</h2>
  </div>
</body>

<script>
  const socket = io('http://localhost:4000');
  const container = document.querySelector('.containerMail');
  const empty = document.querySelector(".empty");
  const caixaEntrada = document.querySelector(".caixa-entrada");

  const emails = []

  socket.on('new-email', function(args) {
    if (emails.length <= 0) {
      container.innerHTML = '';
    }
    emails.push(args);
    renderEmail(args, emails);
    caixaEntrada.innerHTML = `Caixa de Entrada (${emails.length})`;
  })

  function renderEmail(args) {
      container.innerHTML += `
      <div class="wrapper">
        <h5>${args.assunto}</h5>
        <span class="mensagem">${args.mensagem}</span>
      </div>`
  }

</script>
</html>